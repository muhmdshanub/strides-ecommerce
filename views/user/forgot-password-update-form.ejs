<%- include('../layouts/header') -%>

    <link rel="stylesheet" href="/styles/signup.css">

    <!-- <script>
        document.addEventListener('DOMContentLoaded', function () {
            const passwordInput = document.getElementById('exampleInputPassword1');
            const confirmPasswordInput = document.getElementById('exampleInputPassword2');
            const confirmPasswordMessage = document.getElementById('confirmPasswordMessage');
            const submitButton = document.getElementById('submitButton');

            function updatePasswordMessage() {
                const password1 = passwordInput.value.trim();
                const password2 = confirmPasswordInput.value.trim();

                if ((password1 || password2) && password1 !== password2) {
                    confirmPasswordMessage.textContent = 'Passwords do not match';
                    confirmPasswordMessage.style.color = 'red';
                    submitButton.disabled = true;
                } else {
                    confirmPasswordMessage.textContent = '';
                    submitButton.disabled = false;
                }
            }

            passwordInput.addEventListener('input', updatePasswordMessage);
            confirmPasswordInput.addEventListener('input', updatePasswordMessage);
        });
    </script> -->




    <section class="bg-dark">
        <div class="container-fluid py-5 h-100">
            <div class="logo-container">
                <!-- Add your logo here -->
                <img src="/images/logo.jpg" alt="Logo" width="100">
            </div>
            <div class="row justify-content-center align-items-center h-100">
                <div class="col-12 col-lg-9 col-xl-7">
                    <div class="card shadow-2-strong card-registration bg-transparent gradient-custom"
                        style="border-radius: 15px;">
                        <div class="card-body p-4 p-md-5">
                            <div class="parent-container mb-3" style="display: flex; justify-content: center; align-items: center;">
                                <div class="text-center d-inline-block border rounded-2 align-items-center py-2 px-1 bg-light" >
                                    
                                    <h4 class=" text-dark">Update password</h3>
                                </div>
                            </div>
                            
                            <%- include('../layouts/_messages') -%>
                                <form method="POST" action="/forgot-password-update-password" novalidate>
                                    
                                    
                                    <div class="mb-3">
                                        <input type="password" class="form-control" id="exampleInputPassword1"
                                            placeholder="Password" name="password" required>
                                    </div>
                                    <div class="mb-3">
                                        <input type="password" class="form-control" id="exampleInputPassword2"
                                            placeholder="Confirm Password" name="confirmPassword" required>
                                    </div>
                                    <small id="confirmPasswordMessage"></small>
                                    

                                    <button type="submit" id="submitButton"
                                        class="  btn btn-danger d-block mx-auto">Update</button>

                                    

                                </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script defer>
        document.addEventListener('DOMContentLoaded', function () {
            console.log('DOM is loaded');
    
            const form = document.querySelector('form');
            const passwordInput = document.getElementById('exampleInputPassword1');
            const confirmPasswordInput = document.getElementById('exampleInputPassword2');
            const confirmPasswordMessage = document.getElementById('confirmPasswordMessage');
            const submitButton = document.getElementById('submitButton');
    
            function updatePasswordMessage() {
                const password1 = passwordInput.value.trim();
                const password2 = confirmPasswordInput.value.trim();
    
                if ((password1 || password2) && password1 !== password2) {
                    confirmPasswordMessage.textContent = 'Passwords do not match';
                    confirmPasswordMessage.style.color = 'red';
                    submitButton.disabled = true;
                } else {
                    confirmPasswordMessage.textContent = '';
                    submitButton.disabled = false;
                }
            }
    
            function validateForm() {
                
                const password = form.elements['password'].value.trim();
                const confirmPassword = form.elements['confirmPassword'].value.trim();
    
                // Custom validation logic
                const errors = [];
    
                clearAllPopovers(); // Clear existing popovers
    
                
    
                if (password.length < 8) {
                    errors.push('Password should be at least 8 characters long.');
                    showPopover('exampleInputPassword1', 'Password should be at least 8 characters long.');
                } else {
                    hidePopover('exampleInputPassword1');
                }
    
                if (password !== confirmPassword) {
                    errors.push('Passwords do not match.');
                    showPopover('exampleInputPassword2', 'Passwords do not match.');
                } else {
                    hidePopover('exampleInputPassword2');
                }
    
                return errors;
            }
    
            function showPopover(inputId, message) {
                const inputField = document.getElementById(inputId);
                const popover = document.createElement('div');
                popover.className = 'custom-popover';
                popover.textContent = message;
    
                // Set styles for the popover
                popover.style.color = 'white'; // Text color
                popover.style.backgroundColor = 'red'; // Background color
    
                inputField.parentElement.appendChild(popover);
            }
    
            function hidePopover(inputId) {
                const inputField = document.getElementById(inputId);
                const existingPopover = inputField.parentElement.querySelector('.custom-popover');
                if (existingPopover) {
                    existingPopover.remove();
                }
            }
    
            function clearAllPopovers() {
                const popovers = document.querySelectorAll('.custom-popover');
                popovers.forEach(popover => popover.remove());
            }
    
            passwordInput.addEventListener('input', updatePasswordMessage);
            confirmPasswordInput.addEventListener('input', updatePasswordMessage);
    
            form.addEventListener('submit', function (event) {
                const errors = validateForm();
    
                if (errors.length > 0) {
                    event.preventDefault();
                } else {
                    // Continue with the existing password validation logic
                    updatePasswordMessage();
                }
            });
        });
    </script>
    
    

    <%- include('../layouts/footer') -%>